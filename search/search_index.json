{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Enterprise Scale AI Factory","text":"<p>Welcome to the official Enterprise Scale AI Factory \u2014 an enterprise AI landing zone, established 2019, WAF-aligned, designed for Azure Public Cloud and compatible with Azure Government and Sovereign Cloud.</p>"},{"location":"#what-is-the-ai-factory","title":"What is the AI Factory?","text":"<p>The Enterprise Scale AI Factory is a plug-and-play solution that automates the provisioning, deployment, and management of AI projects on Azure using a template-driven approach.</p> <ul> <li>AI-ready landing zones with templates for DataOps, MLOps, and GenAIOps.</li> <li>Automatically deploys 1\u201335 Azure services in a WAF-aligned application landing zone. It supports the full AI spectrum \u2014 generative AI, deep learning, machine learning, and traditional application development: AI Foundry, Azure Machine Learning, Databricks, AI Search, AKS, Logic Apps, Container Apps, Azure Functions, PostgreSQL, SQL Database, and more.</li> <li>Add or remove services at any time via feature flags \u2014 all wired up with private networking, RBAC, and monitoring automatically is created or cleaned up when removing resource.</li> <li>Supports both GitHub Actions and Azure DevOps as orchestrators.</li> </ul> <p>Note</p> <p>Since the Well-Architected Framework does not recommend using Azure Developer CLI (<code>azd</code>) for production, this project uses GA <code>Azure CLI</code> with orchestrator pipelines in GitHub Actions or Azure DevOps Pipelines.</p>"},{"location":"#main-purpose","title":"Main Purpose","text":"<ol> <li>Marry multiple best practices: Secure Enterprise Scale AI Landing Zones + Secure GenAIOps/MLOps templates \u2014 GenAIOps templates built on unsecured infrastructure are incompatible with private-endpoint-based infra, so the two are designed together here.</li> <li>Plug-and-play: Dynamically creates infra resources per team, including subnet/IP calculation, private networking, RBAC, and ACL permissions on the data lake \u2014 fully automated.</li> <li>Template-based project delivery: Project-based structure (cost control, privacy, scalability) with ready-made templates for DataLake, DataOps, MLOps, and GenAIOps.</li> <li>Enterprise scale, security, and battle-tested: Used by customers and partners with MLOps and GenAIOps since 2019.</li> <li>Intelligent CRUD for 30+ Azure resources: Enable and disable feature flags to add or safely remove resources. The AI Factory's internal dependency graph ensures that services are created, updated, and deleted in the correct order \u2014 including proper cleanup \u2014 without breaking dependent resources.</li> <li>Turn-key Enterprise Scale Data Lake with Datamesh: A structured, permission-layered data lake is provisioned automatically, with per-project ACL isolation and Datamesh-ready design, to marry data management with AI workloads.</li> <li>Flexible with 10+ BYO concepts: Bring Your Own IaC (Bicep, Terraform, ARM) on top of the AI Factory pipelines; BYO networking (VNet, subnets, routing tables); BYO Data Lake; BYO App Service Environment; BYO encryption key (CMK) \u2014 all configurable via a handful of parameters.</li> </ol>"},{"location":"#architectures","title":"Architectures","text":"<p>The AI Factory supports two baseline architectures:</p> Architecture Description ESML Enterprise Scale Machine Learning \u2014 discriminative AI, MLOps, DataOps GenAI-1 Enterprise Scale GenAI \u2014 AI Foundry, AI Search, agentic scenarios"},{"location":"#genai-1-baseline-minimum","title":"GenAI-1 Baseline (minimum)","text":"<p>AI Foundry \u00b7 AI Search \u00b7 2\u00d7 Storage \u00b7 Key Vault \u00b7 Monitoring \u00b7 Dashboards \u00b7 Private Networking</p> <p>Optional add-ons (enabled via feature flags, can be added at any time):</p> Category Services AI Azure OpenAI (standalone), Azure Machine Learning, Azure Speech, Azure Vision, Bing Grounding Front-end / Hosting Azure Container Apps, Azure Web App / Function App, AKS (private + Arc-enabled) Data &amp; Databases Cosmos DB, MongoDB, Azure SQL, PostgreSQL Flexible, Azure Cache for Redis Integration &amp; ETL Azure Data Factory, Databricks, Event Hubs, Logic Apps, APIM AI Gateway, Microsoft Fabric / OneLake <p></p>"},{"location":"#quick-links","title":"Quick Links","text":"Resource Link Setup Guide How-to set up AI Factory Update Guide How-to update AI Factory CAF Documentation AI Factory in Cloud Adoption Framework WAF AI Workload Well-Architected Framework \u2014 AI personas Bootstrap Template AIFactory Template Repo"},{"location":"#public-references","title":"Public References","text":"<ul> <li>Epiroc Customer Story: Epiroc advances manufacturing innovation with AI Factory</li> <li>Technical Blog: Predict steel quality with Azure AutoML in manufacturing</li> </ul>"},{"location":"architectures/","title":"Automated Architectures","text":"<p>The AI Factory currently provides two automated template architectures \u2014 ESML and GenAI-1 \u2014 that are deployed as AI Factory projects inside your AI landing zones.</p>"},{"location":"architectures/#architecture-overview","title":"Architecture Overview","text":"<p>Each team in the AI Factory gets their own floor: an isolated project with either Architecture 1 (ESML) or Architecture 2 (GenAI-1), or both. Services can be turned ON/OFF at any time via feature flags without disrupting other projects.</p>"},{"location":"architectures/#architecture-1-esml-enterprise-scale-machine-learning","title":"Architecture 1 \u2014 ESML (Enterprise Scale Machine Learning)","text":"<p>Designed for discriminative AI workloads: model training, batch inference, and online scoring.</p> <p>Baseline services: - Azure Machine Learning (private workspace) - Azure Container Registry (Premium, private) - Azure Storage (Data Lake) - Key Vault, Application Insights - Private networking (VNet, subnets, private endpoints)</p> <p>Optional services: - AKS (private cluster, Arc-enabled) for online scoring - Azure Data Factory for pipeline orchestration - Azure Databricks for large-scale feature engineering - Microsoft Fabric / OneLake integration</p>"},{"location":"architectures/#architecture-2-genai-1-enterprise-scale-genai","title":"Architecture 2 \u2014 GenAI-1 (Enterprise Scale GenAI)","text":"<p>Designed for generative AI workloads: RAG, agentic pipelines, LLM-based applications.</p> <p>Baseline services: - AI Foundry Hub + default project (private) - AI Search (private, with shared private link support) - Azure OpenAI (via AI Foundry) - 2\u00d7 Storage accounts, Key Vault, Application Insights, Monitoring dashboards - Private networking</p> <p>Optional services (feature flags): - Cosmos DB (required for AI Foundry Capacity Host) - Container Apps, Web App, Function App, AKS - Logic Apps, Event Hubs, APIM AI Gateway - Bing Grounding, Azure Vision, Speech, Content Safety, Document Intelligence - PostgreSQL, Redis Cache, Azure SQL</p>"},{"location":"architectures/#enterprise-landing-zone-context","title":"Enterprise Landing Zone Context","text":"<p>The AI Factory projects live inside 3 AI landing zones (Dev, Stage, Prod), which can be connected to an existing enterprise network using:</p> Topology Description Hub/Spoke Traditional hub VNet with peered spoke VNets per environment VWAN Hub Azure Virtual WAN for global, managed connectivity <p></p>"},{"location":"architectures/#esml-with-fabric-flavour","title":"ESML With Fabric Flavour","text":""},{"location":"intelligence/","title":"AI Factory Intelligence","text":"<p>AI Factory Intelligence is the top-level capability that transforms the AI Factory from a set of Bicep templates into a self-aware, context-driven provisioning platform.</p>"},{"location":"intelligence/#capability-summary","title":"Capability Summary","text":"Capability Description Dynamic IP/Subnet Calculator One integer per environment \u2192 all subnet CIDRs auto-calculated Dynamic RBAC Engine Service principal + managed identity roles assigned automatically across all services Persona Mapping Entra ID groups \u2192 predefined personas \u2192 fine-grained RBAC Feature Flag Orchestrator Pipeline reads flags \u2192 invokes only the required Bicep modules Incremental / Idempotent Deployments Re-run safely at any time to add services or apply updates Salt-based Resource Naming Deterministic unique 5-char salt prevents resource name collisions Debug Mode Individual pipeline steps can be skipped (<code>debug_disable_XX=true</code>)"},{"location":"intelligence/#dynamic-ip-calculator","title":"Dynamic IP Calculator","text":"<p>Given only:</p> <pre><code>dev_cidr_range: \"61\"\ntest_cidr_range: \"62\"\nprod_cidr_range: \"63\"\ncommon_vnet_cidr: \"172.16.0.0/16\"\n</code></pre> <p>The pipeline automatically calculates all subnets:</p> Subnet DEV CIDR Common subnet <code>172.16.61.0/26</code> Scoring subnet <code>172.16.61.64/26</code> Power BI GW subnet <code>172.16.61.128/26</code> Bastion subnet <code>172.16.61.192/26</code> Project GenAI subnet <code>172.16.61.X/26</code> Project AKS subnet <code>172.16.61.X/26</code>"},{"location":"intelligence/#dynamic-rbac-engine","title":"Dynamic RBAC Engine","text":"<p>At deployment time, the pipeline:</p> <ol> <li>Reads the project service principal OID and managed identity from the seeding Key Vault.</li> <li>Assigns the correct Azure RBAC roles to each service (Storage, Key Vault, AI Foundry, AI Search, ACR, etc.).</li> <li>Sets up ACL permissions on the Data Lake for the project team.</li> <li>Applies Entra ID group assignments based on configured personas.</li> </ol>"},{"location":"intelligence/#feature-flag-orchestrator","title":"Feature Flag Orchestrator","text":"<p>Feature flags in <code>variables.yaml</code> / <code>.env</code> control which services are deployed:</p> <pre><code>enableAIFoundry: \"true\"      # deploy AI Foundry\nenableAISearch: \"true\"       # deploy AI Search\nenableCosmosDB: \"false\"      # skip Cosmos DB\nenableContainerApps: \"false\" # skip Container Apps (add later)\n</code></pre> <p>On re-run with <code>enableContainerApps: \"true\"</code>, only the Container Apps step runs \u2014 existing services are untouched.</p> <p>For the full persona reference, see AI Factory Intelligence \u2014 Concepts.</p>"},{"location":"news/","title":"News &amp; Releases","text":"<p>Stay up to date with the latest AI Factory releases, features, and breaking changes.</p>"},{"location":"news/#latest-releases","title":"Latest Releases","text":""},{"location":"news/#release-124","title":"Release 1.24","text":"<p>See RELEASE_124.md for full details.</p>"},{"location":"news/#release-123","title":"Release 1.23","text":"<p>See RELEASE_123.md for full details.</p>"},{"location":"news/#release-120","title":"Release 1.20","text":"<p>See RELEASE_120.md for full details.</p>"},{"location":"news/#feature-roadmap","title":"Feature Roadmap","text":"<p>The AI Factory follows a pin-to-release-branch model. When a new feature is available or a breaking change requires a fix, you update by pointing your submodule to the latest release branch.</p> <p>See the main README for the current recommended release branch.</p>"},{"location":"news/#breaking-changes-policy","title":"Breaking Changes Policy","text":"<p>All breaking changes are documented in the release notes. The AI Factory team aims to maintain backward compatibility for all <code>variables.yaml</code> / <code>.env</code> parameters across minor releases.</p> <p>Warning</p> <p>When upgrading between major releases, review the release notes carefully. Pay particular attention to deprecated variables (e.g. <code>enableAIServices</code>, <code>enableAIFoundryHub</code>, <code>addAIFoundryHub</code> \u2014 all deprecated from 2026-01 onwards; use <code>enableAIFoundry</code> instead).</p>"},{"location":"concepts/","title":"AI Factory Concepts","text":"<p>The Enterprise Scale AI Factory is built around four foundational concepts that together deliver an enterprise-grade, scalable, and secure AI platform.</p>"},{"location":"concepts/#the-four-pillars","title":"The Four Pillars","text":"Concept Description AI Factory Intelligence Built-in automation, dynamic networking, RBAC, and persona-based access control Enterprise Grade &amp; Scale WAF-aligned, private networking, multi-environment (Dev/Stage/Prod), scale sets for 200\u2013300 projects Templates \u2014 IaC Bicep-based Infrastructure-as-Code for repeatable, auditable deployments Templates \u2014 DataOps / MLOps / GenAIOps Project templates for data, ML, and GenAI workloads"},{"location":"concepts/#design-philosophy","title":"Design Philosophy","text":"<ul> <li>Project-based isolation: Each team/use-case gets its own floor with isolated networking, RBAC, and data access.</li> <li>Feature flags: Services are toggled on/off \u2014 deploy a minimal baseline first, add services incrementally as your project evolves.</li> <li>Bring Your Own: Supports BYO vNet, BYO subnets, BYO Terraform, and BYO existing services.</li> <li>Dual orchestrator: Works identically with GitHub Actions or Azure DevOps Pipelines.</li> </ul>"},{"location":"concepts/enterprise-scale/","title":"Enterprise Grade &amp; Scale","text":"<p>The AI Factory is designed for production enterprise workloads from day one \u2014 not retrofitted.</p>"},{"location":"concepts/enterprise-scale/#waf-alignment","title":"WAF Alignment","text":"<p>Every architectural decision follows Microsoft's Well-Architected Framework (WAF):</p> WAF Pillar AI Factory Implementation Reliability Multi-environment isolation (Dev / Stage / Prod), retry settings, diagnostics Security Private endpoints on all services, CMK support, Entra ID RBAC, Defender for AI Cost Optimization Feature flags reduce cost in lower environments; shared ACR option Operational Excellence Full IaC (Bicep), pipeline orchestration (ADO/GHA), diagnostic setting levels Performance Efficiency AKS auto-scaling, AML cluster scaling, configurable SKUs per environment"},{"location":"concepts/enterprise-scale/#scale-sets","title":"Scale Sets","text":"<p>The AI Factory uses a scale set concept to support organisations with many teams:</p> <ul> <li>Each scale set suffix (e.g. <code>-001</code>) represents one deployment of the common infrastructure.</li> <li>Within a scale set, up to 200\u2013300 AI Factory projects can be created, each isolated by project number (<code>project_number_000</code>).</li> <li>Multiple scale sets can be deployed for larger organisations.</li> </ul>"},{"location":"concepts/enterprise-scale/#multi-environment-architecture","title":"Multi-environment Architecture","text":"<p>Environments are deployed to separate Azure subscriptions (recommended) and share no network by default:</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Subscription: DEV                                  \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u2502\n\u2502  \u2502  AI Factory Common (vNet, shared services)  \u2502   \u2502\n\u2502  \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510         \u2502   \u2502\n\u2502  \u2502  \u2502  Project 001 \u2502  \u2502  Project 002 \u2502  ...     \u2502   \u2502\n\u2502  \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518         \u2502   \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Subscription: STAGE                                \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Subscription: PROD                                 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"concepts/enterprise-scale/#landing-zone-options","title":"Landing Zone Options","text":"Mode When to use Traditional Hub/Spoke Standard enterprise networking with a central hub VNet VWAN Hub Azure Virtual WAN for global connectivity Standalone Fully self-contained with its own VNet \u2014 ideal for PoC Hybrid (public + private) Public access via VPN / IP whitelist / Bastion alongside private endpoints"},{"location":"concepts/intelligence/","title":"AI Factory Intelligence","text":"<p>AI Factory Intelligence refers to the built-in automation layer that makes the AI Factory a truly \"intelligent\" provisioning platform \u2014 not just a collection of Bicep templates.</p>"},{"location":"concepts/intelligence/#what-is-ai-factory-intelligence","title":"What Is AI Factory Intelligence?","text":"<p>AI Factory Intelligence is the set of automated capabilities that understands context and acts accordingly:</p> <ol> <li>Dynamic Subnet / IP Calculator \u2014 automatically computes all CIDR ranges for every subnet in every environment (Dev, Stage, Prod) from a single <code>cidr_range</code> integer per environment. No manual IP planning required.</li> <li>Dynamic RBAC \u2014 automatically assigns the correct roles to the correct identities (Managed Identities, Service Principals, user groups) across all services in a project \u2014 including private endpoint connections, Key Vault access, and storage ACLs.</li> <li>Persona-based Access Control \u2014 maps Entra ID security groups to predefined personas (e.g. <code>p001_esml_team_lead</code>, <code>p012_genai_team_member_aifoundry</code>) so that access rights follow skills and responsibilities, not just roles.</li> <li>Feature-flag orchestration \u2014 the pipeline reads your <code>variables.yaml</code> / <code>.env</code> configuration and decides which Bicep modules to invoke, in which order, skipping disabled services entirely.</li> <li>Incremental deployment \u2014 re-run the pipeline at any time to add new services (e.g. set <code>enableContainerApps=true</code>) without touching previously deployed resources.</li> </ol>"},{"location":"concepts/intelligence/#personas","title":"Personas","text":"<p>The AI Factory uses a persona system aligned with WAF AI personas:</p> Persona ID Role <code>p001</code> ESML Team Lead <code>p002</code> ESML Data Scientist <code>p003</code> ESML Front-end Developer <code>p011</code> GenAI Team Lead <code>p012</code> GenAI AI Foundry specialist <code>p013</code> GenAI Agentic developer <code>p014</code> GenAI DataOps engineer <code>p015</code> GenAI Front-end developer <code>p080</code> Core Team IT Admin <code>p081</code> Core Team DataOps <code>p082</code> Core Team Fabric DataOps"},{"location":"concepts/intelligence/#salt-based-uniqueness","title":"Salt-based Uniqueness","text":"<p>Each AI Factory deployment gets a deterministic 5-character salt derived from the User-Assigned Managed Identity. This salt is used in all resource names to ensure uniqueness without collisions across scale sets.</p> <p>Example: <code>adf-cmn-weu-dev-a4c2b-001</code> \u2014 the <code>a4c2b</code> is the salt.</p>"},{"location":"concepts/templates/dataops/","title":"DataOps Templates","text":"<p>DataOps templates provide a structured approach to data ingestion, transformation, and governance within the AI Factory.</p>"},{"location":"concepts/templates/dataops/#overview","title":"Overview","text":"<p>The AI Factory includes a DataOps template aligned with the LAMBDA architecture, enabling both batch and real-time data pipelines.</p> <p>Key tools available:</p> Tool Purpose Azure Data Factory Orchestrate ETL/ELT pipelines Azure Databricks Large-scale data transformation and ML Microsoft Fabric / OneLake Modern lakehouse with Snowflake and S3 integration Event Hubs Real-time streaming ingestion"},{"location":"concepts/templates/dataops/#datalake-design","title":"Datalake Design","text":"<p>The AI Factory provisions a structured Data Lake with:</p> <ul> <li>ACL permissions per project team \u2014 each team accesses only its own data.</li> <li>Datamesh-ready structure \u2014 projects can be treated as independent data domains.</li> <li>Standard lake prefix configurable via <code>commonLakeNamePrefixMax8chars</code> (e.g. <code>mrvel</code>).</li> </ul>"},{"location":"concepts/templates/dataops/#dataops-for-core-team","title":"DataOps for Core Team","text":"<p>The Core Team's DataOps engineers (<code>p081_coreteam_dataops</code>, <code>p082_coreteam_dataops_fabric</code>) are responsible for:</p> <ul> <li>Setting up shared ingestion pipelines in the common AI Factory resource group.</li> <li>Providing curated datasets to project teams via datalake ACLs.</li> <li>Managing Fabric integration for cross-system reporting.</li> </ul> <p>Info</p> <p>DataOps templates are located under <code>copy_my_subfolders_to_my_grandparent/mlops/</code> and <code>copy_my_subfolders_to_my_grandparent/dbx/</code>.</p>"},{"location":"concepts/templates/genaiops/","title":"GenAIOps Templates","text":"<p>The AI Factory provides GenAIOps templates for the GenAI-1 project type, enabling a full agentic AI lifecycle within a secure, private Azure environment.</p>"},{"location":"concepts/templates/genaiops/#genai-1-baseline-architecture","title":"GenAI-1 Baseline Architecture","text":"<p>Every GenAI-1 project deploys a secured baseline automatically:</p> Service Purpose AI Foundry (Hub + Project) Central AI development environment AI Search Vector search for RAG scenarios AI Services / Azure OpenAI LLM and embedding model hosting Storage (\u00d72) Data lake + AI Foundry default storage Key Vault Secrets, keys, CMK support Application Insights Monitoring and observability Private Networking All services connected via private endpoints <p>Optional services are added via feature flags \u2014 see Parameters.</p>"},{"location":"concepts/templates/genaiops/#agentic-scenarios","title":"Agentic Scenarios","text":"<p>The GenAI-1 template supports:</p> <ul> <li>RAG (Retrieval Augmented Generation): AI Search + AI Foundry + GPT-4o</li> <li>Agentic Workflows: AI Foundry Agents with network injection, Capacity Host (<code>enableAFoundryCaphost=true</code>)</li> <li>AI Gateway: APIM integration via <code>foundryApiManagementResourceId</code></li> <li>Content Safety: Azure Content Safety service (<code>enableContentSafety=true</code>)</li> </ul>"},{"location":"concepts/templates/genaiops/#default-model-deployment","title":"Default Model Deployment","text":"Model Default enabled Default version <code>gpt-4o</code> \u2705 yes <code>2024-11-20</code> <code>text-embedding-3-large</code> \u2705 yes (recommended for production RAG) latest <code>gpt-4o-mini</code> \u274c no <code>2024-07-18</code> <code>text-embedding-ada-002</code> \u274c no \u2014 <code>text-embedding-3-small</code> \u274c no \u2014 Custom GPT-X \u274c no configurable <p>All model deployments are configurable \u2014 see Parameters \u2014 Advanced Mode.</p>"},{"location":"concepts/templates/genaiops/#genai-project-team-personas","title":"GenAI Project Team Personas","text":"Persona Description <code>p011_genai_team_lead</code> Project lead, architect <code>p012_genai_team_member_aifoundry</code> AI Foundry specialist <code>p013_genai_team_member_agentic</code> Agentic workflow developer <code>p014_genai_team_member_dataops</code> Data pipeline engineer <code>p015_genai_team_member_frontend</code> Front-end / app developer <p>Info</p> <p>GenAIOps templates are located under <code>copy_my_subfolders_to_my_grandparent/genaiops/</code>.</p>"},{"location":"concepts/templates/iac/","title":"IaC Templates","text":"<p>Infrastructure as Code (IaC) is the backbone of the AI Factory. All resources are defined in Azure Bicep, ensuring repeatable, auditable, and version-controlled deployments.</p>"},{"location":"concepts/templates/iac/#bicep-architecture","title":"Bicep Architecture","text":"<p>The Bicep templates are structured as modular, composable units:</p> <pre><code>environment_setup/aifactory/bicep/\n\u251c\u2500\u2500 modules/               # Reusable resource modules\n\u2502   \u251c\u2500\u2500 aiFoundry.bicep\n\u2502   \u251c\u2500\u2500 aiSearch.bicep\n\u2502   \u251c\u2500\u2500 networking.bicep\n\u2502   \u251c\u2500\u2500 keyvault.bicep\n\u2502   \u2514\u2500\u2500 ...\n\u251c\u2500\u2500 esml-common/           # AI Factory common infrastructure\n\u2514\u2500\u2500 esml-project/          # Per-project infrastructure\n</code></pre>"},{"location":"concepts/templates/iac/#deployment-stages-pipeline-steps","title":"Deployment Stages (Pipeline Steps)","text":"Step Description 61 Foundation \u2014 Resource Groups, Managed Identities, VMs 62 Core Infrastructure \u2014 Application Insights, Key Vault, Storage, ACR 63 Cognitive Services \u2014 AI Search, OpenAI, Vision, Speech, etc. 64 Databases \u2014 Cosmos DB, SQL, PostgreSQL, Redis 65 Compute Services \u2014 Container Apps, Web App, Function App 66 AI Platform (V1) \u2014 AI Foundry Hub with default project and connections 67 ML Platform \u2014 Azure Machine Learning, Data Factory, Databricks 68 Integration \u2014 Logic Apps, Event Hubs 69 AI Foundry V2 (2025) \u2014 AI Foundry V2 with RBAC and default project 100 RBAC &amp; Security \u2014 Role assignments across all services (steps 61\u201399) <p>Each step can be individually skipped via <code>debug_disable_XX</code> flags for faster re-runs during development.</p>"},{"location":"concepts/templates/iac/#bring-your-own-byo-options","title":"Bring Your Own (BYO) Options","text":"<p>The IaC supports several BYO overrides to integrate with existing infrastructure:</p> BYO Option Variable Existing vNet <code>vnetNameFull_param</code> + <code>vnetResourceGroup_param</code> Existing subnets <code>BYO_subnets=true</code> + subnet name variables Existing Common Resource Group <code>commonResourceGroup_param</code> Existing Data Lake <code>datalakeName_param</code> Existing Key Vault <code>kvNameFromCOMMON_param</code> Existing ASEv3 <code>byoASEv3=true</code> + <code>byoAseFullResourceId</code> BYO Terraform See BYO Terraform <p>Tip</p> <p>See IaC \u2014 BICEP for detailed Bicep usage and best practices.</p>"},{"location":"concepts/templates/mlops/","title":"MLOps Templates","text":"<p>The AI Factory provides MLOps templates for the ESML (Enterprise Scale Machine Learning) project type, enabling a full ML lifecycle within a secure, private Azure environment.</p>"},{"location":"concepts/templates/mlops/#esml-architecture","title":"ESML Architecture","text":"<p>The ESML project type includes:</p> <ul> <li>Azure Machine Learning workspace \u2014 private, with private endpoints on all dependent services.</li> <li>AML Compute Clusters \u2014 auto-scaling, configurable SKU and node count per environment.</li> <li>AML Compute Instances \u2014 for interactive development.</li> <li>Private AKS Cluster \u2014 for model serving at scale (Azure Arc-enabled).</li> <li>Azure Container Registry (ACR) \u2014 private, Premium SKU for model image storage.</li> <li>Azure Data Factory \u2014 for orchestrating training and batch-inference pipelines.</li> <li>Databricks (optional) \u2014 for large-scale feature engineering.</li> </ul>"},{"location":"concepts/templates/mlops/#esml-with-fabric-flavour","title":"ESML With Fabric Flavour","text":"<p>The ESML project type optionally integrates with Microsoft Fabric:</p> <ul> <li>Data scientists can work from Azure Databricks, Microsoft Fabric, or Azure Machine Learning \u2014 with the same MLOps template.</li> <li>Fabric provides a unified analytics platform with OneLake as the data foundation.</li> </ul>"},{"location":"concepts/templates/mlops/#mlops-pipeline-templates","title":"MLOps Pipeline Templates","text":"<p>Templates are provided for:</p> Template Description Training pipeline AML pipeline for model training with logging and experiment tracking Batch inference pipeline Scheduled or event-driven batch scoring Online inference AKS-hosted REST endpoint with private networking Model registration &amp; promotion Automated model registration and promotion across Dev \u2192 Stage \u2192 Prod"},{"location":"concepts/templates/mlops/#compute-defaults-overridable","title":"Compute Defaults (Overridable)","text":"Setting DEV default TEST/PROD default AKS node SKU <code>Standard_B4ms</code> <code>Standard_DS13-2_v2</code> AKS node count 1 3 AKS Kubernetes version <code>1.33.2</code> <code>1.33.2</code> AML cluster max nodes 3 5 AML cluster SKU <code>Standard_DS3_v2</code> <code>Standard_D13_v2</code> AML compute instance SKU <code>Standard_DS11_v2</code> <code>Standard_ND96amsr_A100_v4</code> <p>All compute settings are overridable via <code>admin_aks_*</code> and <code>admin_aml_*</code> variables.</p> <p>Info</p> <p>MLOps templates are located under <code>copy_my_subfolders_to_my_grandparent/mlops/</code>.</p>"},{"location":"iac/bicep/","title":"IaC \u2014 BICEP","text":"<p>All AI Factory infrastructure is defined in Azure Bicep \u2014 Microsoft's domain-specific language for declaring Azure resources. Bicep compiles to ARM JSON and is fully supported by Azure CLI.</p>"},{"location":"iac/bicep/#why-bicep","title":"Why Bicep?","text":"<ul> <li>GA technology \u2014 used per WAF recommendation (avoids AZD/AVM preview tooling in production).</li> <li>Modular \u2014 each Azure service is a separate Bicep module, reused across project types.</li> <li>Auditable \u2014 all deployments are logged in Azure Deployment history.</li> <li>Incremental \u2014 Bicep deployments are idempotent; re-runs only update changed resources.</li> </ul>"},{"location":"iac/bicep/#repository-structure","title":"Repository Structure","text":"<pre><code>environment_setup/aifactory/bicep/\n\u251c\u2500\u2500 copy_to_local_settings/\n\u2502   \u251c\u2500\u2500 azure-devops/\n\u2502   \u2502   \u2514\u2500\u2500 esml-yaml-pipelines/variables/variables.yaml   # ADO parameters\n\u2502   \u2514\u2500\u2500 github-actions/\n\u2502       \u2514\u2500\u2500 .env.template                                  # GHA parameters\n\u2514\u2500\u2500 modules/                                               # Bicep modules\n</code></pre>"},{"location":"iac/bicep/#key-modules","title":"Key Modules","text":"Module Description <code>aiFoundry.bicep</code> AI Foundry Hub + project, private endpoints, RBAC <code>aiSearch.bicep</code> AI Search with optional shared private link <code>networking.bicep</code> VNet, subnets, NSGs, private DNS zones <code>keyvault.bicep</code> Key Vault with soft-delete, RBAC, private endpoint <code>acr.bicep</code> Azure Container Registry (Premium, private) <code>storage.bicep</code> Storage accounts with ACLs and private endpoints <code>aks.bicep</code> Private AKS cluster with Arc registration <code>containerApps.bicep</code> Azure Container Apps environment <code>cosmosdb.bicep</code> Cosmos DB with private endpoint"},{"location":"iac/bicep/#deployment-flow","title":"Deployment Flow","text":"<pre><code>Pipeline triggers\n      \u2502\n      \u25bc\nStep 05: Build ACR image (if Container Apps)\n      \u2502\n      \u25bc\nSteps 61\u2013100: Bicep module deployments (parallel where possible)\n      \u2502\n      \u25bc\n      Done \u2713\n</code></pre> <p>See IaC Templates for the full list of pipeline steps.</p>"},{"location":"iac/bicep/#cmk-support","title":"CMK Support","text":"<p>Customer-Managed Keys (CMK) are supported for:</p> <ul> <li>Key Vault (stores the CMK key)</li> <li>Storage accounts</li> <li>Azure Machine Learning workspaces</li> <li>AI Foundry</li> </ul> <p>Enable via: <code>cmk=true</code>, <code>cmkKeyName=&lt;your-key-name&gt;</code>.</p> <p>Warning</p> <p>CMK requires <code>acr_dedicated=true</code> and <code>acr_SKU=Premium</code>. Ensure the ACR container registry has been set up before enabling CMK.</p>"},{"location":"iac/terraform/","title":"IaC \u2014 BYO Terraform","text":"<p>The AI Factory natively uses Azure Bicep for IaC. However, if your organisation already has Terraform-based infrastructure, the AI Factory supports a Bring Your Own Terraform (BYO Terraform) mode.</p>"},{"location":"iac/terraform/#byo-terraform-philosophy","title":"BYO Terraform Philosophy","text":"<p>BYO Terraform means: use your existing Terraform for shared/common infrastructure, and let the AI Factory Bicep handle the AI Factory-specific project resources.</p> <p>Typical split:</p> Managed by Terraform Managed by AI Factory Bicep Hub VNet, firewall, DNS zones Project VNets, subnets (or BYO subnets) Shared Key Vaults (seeding KV) Project Key Vaults Shared ACR Project ACR (or shared, configurable) Existing subscriptions, resource groups AI Factory Common RG + Project RGs"},{"location":"iac/terraform/#integration-points","title":"Integration Points","text":"<p>Configure the following variables to point the AI Factory at your existing Terraform-managed resources:</p> Variable Description <code>vnetNameFull_param</code> Full name of your existing VNet <code>vnetResourceGroup_param</code> Resource group of your existing VNet <code>commonResourceGroup_param</code> Existing common resource group name <code>datalakeName_param</code> Existing data lake storage account name <code>kvNameFromCOMMON_param</code> Existing common Key Vault name <code>BYO_subnets=true</code> Use your pre-existing subnets <code>centralDnsZoneByPolicyInHub=true</code> Use your existing centralised private DNS zones <code>privDnsSubscription_param</code> Subscription containing your DNS zones <code>privDnsResourceGroup_param</code> Resource group containing your DNS zones"},{"location":"iac/terraform/#terraform-references","title":"Terraform References","text":"<p>The <code>environment_setup/aifactory/terraform/</code> directory contains Terraform reference configurations that can be used as a starting point for managing shared infrastructure outside the AI Factory Bicep pipeline.</p> <p>Tip</p> <p>For most new deployments, the full Bicep approach (no BYO Terraform) is recommended \u2014 it is simpler, faster, and fully supported. Use BYO Terraform only when integrating into an existing Terraform-managed estate.</p>"},{"location":"orchestrators/ado/","title":"Orchestrator \u2014 Azure DevOps","text":"<p>The AI Factory supports Azure DevOps (ADO) as a first-class orchestrator for all Bicep deployments.</p>"},{"location":"orchestrators/ado/#configuration-file","title":"Configuration File","text":"<p>When using Azure DevOps, all parameters are defined in:</p> <pre><code>environment_setup/aifactory/bicep/copy_to_local_settings/\n  azure-devops/esml-yaml-pipelines/variables/variables.yaml\n</code></pre> <p>Copy this file to your own repository and fill in all <code>&lt;todo&gt;</code> placeholders before running any pipeline.</p>"},{"location":"orchestrators/ado/#service-connections","title":"Service Connections","text":"<p>Six ADO service connections are required \u2014 two per environment:</p> Variable Purpose <code>dev_service_connection</code> Deploys resources to DEV subscription <code>dev_seeding_kv_service_connection</code> Reads secrets from DEV seeding Key Vault <code>test_service_connection</code> Deploys resources to STAGE subscription <code>test_seeding_kv_service_connection</code> Reads secrets from STAGE seeding Key Vault <code>prod_service_connection</code> Deploys resources to PROD subscription <code>prod_seeding_kv_service_connection</code> Reads secrets from PROD seeding Key Vault <p>All service connections must be Azure Resource Manager type, authenticated via a Service Principal.</p>"},{"location":"orchestrators/ado/#pipeline-structure","title":"Pipeline Structure","text":"<p>The ADO YAML pipelines are in:</p> <pre><code>environment_setup/aifactory/bicep/copy_to_local_settings/\n  azure-devops/esml-yaml-pipelines/\n</code></pre>"},{"location":"orchestrators/ado/#triggering-a-deployment","title":"Triggering a deployment","text":"<ol> <li>Copy <code>variables.yaml</code> to your ADO repository.</li> <li>Fill in all mandatory parameters (see Standard Parameters).</li> <li>Run the pipeline \u2014 it will calculate networking, deploy all Bicep modules, and configure RBAC automatically.</li> </ol>"},{"location":"orchestrators/ado/#bootstrap-first-time-setup","title":"Bootstrap (First-time Setup)","text":"<p>Use the bootstrap scripts to set up your ADO environment:</p> <pre><code>bootstrap/02b-ADO-YAML-bootstrap-files.sh\n</code></pre> <p>For updates without overwriting existing variable values:</p> <pre><code>bootstrap/03b-ADO-YAML-bootstrap-files-no-var-overwrite.sh\n</code></pre>"},{"location":"orchestrators/gh/","title":"Orchestrator \u2014 GitHub Actions","text":"<p>The AI Factory supports GitHub Actions (GHA) as a first-class orchestrator for all Bicep deployments, equivalent in functionality to the Azure DevOps option.</p>"},{"location":"orchestrators/gh/#configuration-file","title":"Configuration File","text":"<p>When using GitHub Actions, all parameters are defined in:</p> <pre><code>environment_setup/aifactory/bicep/copy_to_local_settings/\n  github-actions/.env.template\n</code></pre> <p>Copy this file to your own repository as <code>.env</code> (or use GitHub Actions environment secrets/variables) and fill in all <code>&lt;todo&gt;</code> placeholders.</p>"},{"location":"orchestrators/gh/#authentication","title":"Authentication","text":"<p>GitHub Actions uses federated credentials (OIDC) or Service Principal credentials stored as GitHub secrets:</p> Secret Description <code>AZURE_CLIENT_ID</code> Service principal App ID <code>AZURE_CLIENT_SECRET</code> Service principal secret (from seeding KV) <code>AZURE_TENANT_ID</code> Azure tenant ID <code>AZURE_SUBSCRIPTION_ID_DEV</code> DEV subscription ID <code>AZURE_SUBSCRIPTION_ID_TEST</code> STAGE subscription ID <code>AZURE_SUBSCRIPTION_ID_PROD</code> PROD subscription ID"},{"location":"orchestrators/gh/#workflow-structure","title":"Workflow Structure","text":"<p>GitHub Actions workflows are in:</p> <pre><code>.github/workflows/\n</code></pre>"},{"location":"orchestrators/gh/#triggering-a-deployment","title":"Triggering a deployment","text":"<ol> <li>Copy <code>.env.template</code> to your GHA repository and configure all mandatory parameters.</li> <li>Add required secrets to your GitHub repository or environment.</li> <li>Trigger the workflow manually (<code>workflow_dispatch</code>) or via a push to the designated branch.</li> </ol>"},{"location":"orchestrators/gh/#bootstrap-first-time-setup","title":"Bootstrap (First-time Setup)","text":"<p>Use the bootstrap scripts to set up your GitHub Actions environment:</p> <pre><code>bootstrap/02a-GH-bootstrap-files.sh\n</code></pre> <p>For updates without overwriting existing variable values:</p> <pre><code>bootstrap/03a-GH-bootstrap-files-no-env-overwrite.sh\n</code></pre>"},{"location":"orchestrators/gh/#this-documentation-site","title":"This Documentation Site","text":"<p>This MkDocs documentation site is itself deployed via GitHub Actions. See the workflow at <code>.github/workflows/deploy-docs.yml</code>.</p>"},{"location":"parameters/","title":"Parameters","text":"<p>All AI Factory deployments are configured through a single flat file \u2014 <code>.env.template</code> (GitHub Actions) or <code>variables.yaml</code> (Azure DevOps). Both files use the same tag-based comment system to describe every variable.</p>"},{"location":"parameters/#ai-factory-configuration-wizard","title":"AI Factory Configuration Wizard","text":"<p>We recommend using the AI Factory Configuration Wizard to configure the AI Factory and its first project initially. The wizard provides a guided, form-based UI that validates your inputs and generates a correctly populated configuration file \u2014 significantly reducing the risk of misconfiguration on first deployment.</p> <p>Two common workflows</p> <ul> <li>ITSM-integrated (fully automated): Many teams integrate the AI Factory pipelines directly with their ITSM system (ServiceNow, Jira Service Management, etc.), so that project teams can \"order\" an AI Factory project via a self-service ticket \u2014 triggering the pipeline with 100% automation and zero manual intervention.</li> <li>Core-team managed: Other teams prefer to route tickets to the AI Factory core team, who then uses the AI Factory Configuration Wizard to generate the correct configuration from the ticket information and trigger the pipeline on behalf of the requesting team.</li> </ul> <p>Download the Configuration Wizard for your platform:</p> <ul> <li>Download AI Factory Configuration Wizard \u2014 Windows</li> <li>Download AI Factory Configuration Wizard \u2014 Linux</li> <li>Download AI Factory Configuration Wizard \u2014 macOS</li> </ul> <p></p>"},{"location":"parameters/#comment-tag-system","title":"Comment Tag System","text":"<p>Each variable line carries a structured comment that tells you exactly what to do:</p> <pre><code>VARIABLE=\"default_value\"  # &lt;mandatory|optional&gt;Title&lt;default&gt;value&lt;keep-as-is|recommended|ensure&gt; detail &lt;otherwise&gt; alternative\n</code></pre> Tag Meaning <code>&lt;mandatory&gt;</code> Must be set before the pipeline can run <code>&lt;optional&gt;</code> Safe to leave at its default value for standard deployments <code>&lt;default&gt;value</code> The value already set in the file \u2014 what you get if you don't change it <code>&lt;keep-as-is&gt;</code> Default is correct for most deployments \u2014 no action needed <code>&lt;recommended&gt;</code> Not the default, but Microsoft's recommended value for production <code>&lt;ensure&gt;</code> You must look up or verify a value from an external source (e.g. Azure Portal) <code>&lt;otherwise&gt;</code> What to do in the non-standard / non-recommended scenario"},{"location":"parameters/#choose-your-view","title":"Choose Your View","text":"View Who it's for Standard Mode First-time setup \u2014 only the mandatory parameters you must change Advanced Mode Full reference \u2014 every parameter, grouped by category"},{"location":"parameters/#source-files","title":"Source Files","text":"Orchestrator File to edit GitHub Actions <code>environment_setup/aifactory/bicep/copy_to_local_settings/github-actions/.env.template</code> Azure DevOps <code>environment_setup/aifactory/bicep/copy_to_local_settings/azure-devops/esml-yaml-pipelines/variables/variables.yaml</code>"},{"location":"parameters/advanced/","title":"Parameters \u2014 Advanced Mode","text":"<p>This page lists all parameters \u2014 both mandatory (M) and optional (O) \u2014 from the <code>.env.template</code> file, organized by category. Mandatory parameters are also covered in Standard Mode.</p> <p>How to read the tables</p> <ul> <li>M/O \u2014 M = mandatory (required before first run), O = optional</li> <li>Guidance follows tag priority: <code>ensure</code> \u203a <code>recommended</code> \u203a <code>keep-as-is</code> \u203a <code>otherwise</code></li> <li>Source file: <code>environment_setup/aifactory/bicep/copy_to_local_settings/github-actions/.env.template</code></li> </ul>"},{"location":"parameters/advanced/#group-1-github-bootstrap","title":"Group 1 \u2014 GitHub Bootstrap","text":"Variable Default M/O Guidance Description <code>GITHUB_USERNAME</code> <code>&lt;todo&gt;</code> M ensure your GitHub username or org name GitHub user or org that owns the new repo <code>GITHUB_NEW_REPO</code> <code>&lt;todo&gt;/&lt;todo&gt;azure-enterprise-scale-aifactory-001</code> M ensure format must be <code>&lt;org&gt;/&lt;repo-name&gt;</code> Full repo path for the new AI Factory repo <code>TENANT_ID</code> <code>&lt;todo&gt;</code> M ensure Azure Portal \u2192 Entra ID \u2192 Overview (Directory ID) Azure AD / Entra tenant ID <code>TENANT_AZUREML_OID</code> <code>&lt;todo&gt;</code> M ensure Entra ID \u2192 Enterprise Apps \u2192 Azure Machine Learning (AppId <code>0736f41a-...</code>) \u2192 OID. otherwise optional if <code>ENABLE_AI_FOUNDRY=false</code> Object ID of the Azure ML service principal in your tenant <code>GITHUB_USE_SSH</code> <code>false</code> O keep-as-is Use SSH instead of HTTPS for git operations <code>GITHUB_TEMPLATE_REPO</code> <code>azure/enterprise-scale-aifactory</code> O keep-as-is Source template repo used for bootstrapping <code>GITHUB_NEW_REPO_VISIBILITY</code> <code>public</code> O keep-as-is. otherwise <code>private</code> or <code>internal</code> Visibility of the newly created repo"},{"location":"parameters/advanced/#group-2-ai-factory-globals","title":"Group 2 \u2014 AI Factory Globals","text":"Variable Default M/O Guidance Description <code>AIFACTORY_LOCATION</code> <code>eastus2</code> M keep-as-is. otherwise any Azure region name Primary Azure region for all AI Factory resources <code>AIFACTORY_LOCATION_SHORT</code> <code>eus2</code> M keep-as-is. otherwise 4-char region abbreviation matching your region Short suffix used in resource names <code>ADMIN_AISEARCH_TIER</code> <code>basic</code> M ensure <code>free</code> tier is not allowed when using private endpoints AI Search SKU tier <code>AISEARCH_SEMANTIC_TIER</code> <code>free</code> M keep-as-is. Options: <code>disabled</code>, <code>free</code>, <code>standard</code> Semantic search tier for AI Search <code>AIFACTORY_SUFFIX</code> <code>-001</code> M keep-as-is. otherwise increment to <code>-002</code>, <code>-003</code> for additional scale sets AI Factory scale-set suffix appended to common resource names <code>AIFACTORY_PREFIX</code> <code>acme-ai</code> O keep-as-is. otherwise company-specific prefix, max 6 chars Prefix for AI Factory resource group names <code>LAKE_PREFIX</code> <code>mrvel</code> O keep-as-is. max 8 chars Data lake storage account name prefix <code>USE_COMMON_ACR_FOR_PROJECTS</code> <code>true</code> O keep-as-is. otherwise <code>false</code> = each project gets its own ACR (higher cost) Share common ACR across all projects <code>AIFACTORY_COMMON_ONLY_DEV_ENVIRONMENT</code> <code>true</code> O keep-as-is. otherwise <code>false</code> = also deploy common resources in Stage + Prod Deploy common resources only to DEV environment <code>KEYVAULT_SOFT_DELETE</code> <code>7</code> O keep-as-is. ensure mandatory value <code>7</code> if <code>CMK=true</code>. otherwise <code>90</code> days recommended for production KVs Key Vault soft-delete retention period (days) <code>USE_AD_GROUPS</code> <code>true</code> O keep-as-is. otherwise <code>false</code> = assign RBAC to individual user OIDs Use Entra ID groups for RBAC assignments <code>ADMIN_USERNAME</code> <code>esmladmin</code> O keep-as-is Admin username for VMs deployed by AI Factory <code>ADMIN_HYBRID_BENEFIT</code> <code>false</code> O keep-as-is. otherwise <code>true</code> if you have eligible Windows Server / SQL Server licences Enable Azure Hybrid Benefit on Windows VMs <code>ENABLE_AMPLS</code> <code>false</code> O keep-as-is Enable Azure Monitor Private Link Scope <code>ADD_BASTION_HOST</code> <code>false</code> O keep-as-is Deploy Azure Bastion host in the common VNet <code>ENABLE_ADMIN_VM</code> <code>false</code> O keep-as-is Deploy admin jump-box VM <code>DIAGNOSTIC_SETTING_LEVEL</code> <code>gold</code> O keep-as-is. otherwise <code>silver</code> or <code>bronze</code> to reduce Log Analytics ingestion cost Diagnostics verbosity level"},{"location":"parameters/advanced/#group-3-azure-subscriptions-cidr-ranges","title":"Group 3 \u2014 Azure Subscriptions &amp; CIDR Ranges","text":"Variable Default M/O Guidance Description <code>DEV_SUBSCRIPTION_ID</code> <code>&lt;todo&gt;</code> M ensure the common SP must have Contributor on this subscription DEV Azure subscription ID <code>DEV_CIDR_RANGE</code> <code>61</code> M keep-as-is. otherwise any integer 0\u2013255 that doesn't conflict with existing VNets Integer replacing <code>XX</code> in all DEV subnet CIDRs (e.g. <code>172.16.61.0/26</code>) <code>STAGE_CIDR_RANGE</code> <code>62</code> M keep-as-is Integer replacing <code>XX</code> in STAGE subnet CIDRs <code>PROD_CIDR_RANGE</code> <code>63</code> M keep-as-is Integer replacing <code>XX</code> in PROD subnet CIDRs <code>STAGE_SUBSCRIPTION_ID</code> <code>&lt;todo&gt;</code> O recommended use a separate subscription from DEV STAGE Azure subscription ID <code>PROD_SUBSCRIPTION_ID</code> <code>&lt;todo&gt;</code> O recommended use a separate subscription from DEV PROD Azure subscription ID"},{"location":"parameters/advanced/#group-4-versioning-resource-tags","title":"Group 4 \u2014 Versioning &amp; Resource Tags","text":"Variable Default M/O Guidance Description <code>AIFACTORY_VERSION_MAJOR</code> <code>1</code> O keep-as-is AI Factory major version (used in tags) <code>AIFACTORY_VERSION_MINOR</code> <code>24</code> O keep-as-is AI Factory minor version (used in tags) <code>AIFACTORY_BRANCH_CHOSEN</code> <code>release/v1.24</code> O keep-as-is Git branch checked out during bootstrap <code>TAG_COSTCETER_COMMON</code> <code>9999</code> O keep-as-is. otherwise set to your organisation's cost centre code Cost centre tag applied to common resources <code>TAG_REPOSITORY</code> <code>aifactory</code> O keep-as-is Repository tag value <code>TAG_REPOSITORY_BRANCH</code> <code>aifactory-001</code> O keep-as-is Branch tag value <code>TAGS</code> (JSON blob) O keep-as-is. otherwise update <code>CostCenter</code> and <code>Description</code> values Additional Azure resource tags as a JSON object"},{"location":"parameters/advanced/#group-5-common-service-principal-identity-keys","title":"Group 5 \u2014 Common Service Principal (Identity Keys)","text":"Variable Default M/O Guidance Description <code>AIFACTORY_SEEDING_KEYVAULT_SUBSCRIPTION_ID</code> <code>&lt;todo&gt;</code> M ensure subscription where the DEV seeding Key Vault exists Subscription ID of the DEV seeding KV <code>AIFACTORY_SEEDING_KEYVAULT_NAME</code> <code>&lt;todo&gt;</code> M ensure Key Vault must exist and contain the required SP secrets Name of the DEV seeding Key Vault <code>AIFACTORY_SEEDING_KEYVAULT_RG</code> <code>&lt;todo&gt;</code> M ensure resource group must exist Resource group of the DEV seeding KV <code>AZURE_MACHINELEARNING_SP_OID</code> <code>&lt;todo&gt;</code> M ensure Entra ID \u2192 Enterprise Apps \u2192 Azure Machine Learning \u2192 Object ID OID of the Azure ML service principal <code>COMMON_SERVICE_PRINCIPAL_KV_S_NAME_APPID</code> <code>esml-common-sp-id</code> M ensure must exactly match the secret name in your seeding KV Secret name storing the common SP App ID <code>COMMON_SERVICE_PRINCIPAL_KV_S_NAME_SECRET</code> <code>esml-common-sp-secret</code> M ensure must exactly match the secret name in your seeding KV Secret name storing the common SP secret <code>INPUT_COMMON_SPID_KEY</code> <code>esml-common-sp-id</code> M ensure must exactly match secret name in seeding KV Read alias for common SP App ID secret name <code>INPUT_COMMON_SP_SECRET_KEY</code> <code>esml-common-sp-secret</code> M ensure must exactly match secret name Read alias for common SP secret name <code>COMMON_SERVICE_PRINCIPLE_OID_KEY</code> <code>esml-common-sp-oid</code> M ensure must exactly match secret name Secret name storing the common SP Object ID"},{"location":"parameters/advanced/#group-6-project-setup","title":"Group 6 \u2014 Project Setup","text":"Variable Default M/O Guidance Description <code>PROJECT_NUMBER</code> <code>001</code> M keep-as-is. otherwise <code>002</code>, <code>003</code>\u2026 for additional projects Three-digit project number used in resource names <code>PROJECT_MEMBERS</code> <code>&lt;todo&gt;</code> M ensure comma-separated Entra ID OIDs (users) or AD group OIDs OIDs that receive project-level RBAC <code>RUN_JOB1_NETWORKING</code> <code>true</code> M keep-as-is. otherwise <code>false</code> to skip networking job on subsequent re-runs Run the networking deployment job <code>PROJECT_MEMBERS_EMAILS</code> <code>&lt;todo&gt;</code> O recommended set for cost tracking and notifications Comma-separated email addresses of project members <code>PROJECT_MEMBERS_IP_ADDRESS</code> <code>-</code> O ensure mandatory if IP-whitelisting mode is enabled Comma-separated public IPs for firewall whitelisting <code>TAG_COSTCENTER</code> <code>1234</code> O keep-as-is. otherwise your project cost centre code Cost centre tag for project resources <code>TAGS_PROJECT</code> (JSON blob) O keep-as-is. otherwise update field values Additional resource tags for project resources <code>SERVICE_SETTING_DEPLOY_PROJECT_VM</code> <code>false</code> O keep-as-is Deploy a jump-box VM in the project resource group <code>PROJECT_TYPE</code> (type string) O keep-as-is Project persona type (affects RBAC persona mapping) <code>PROJECT_PREFIX</code> <code>esml-</code> O keep-as-is Prefix for project resource group names <code>PROJECT_SUFFIX</code> <code>-rg</code> O keep-as-is Suffix for project resource group names"},{"location":"parameters/advanced/#group-7-project-service-principals-secret-names-in-seeding-kv","title":"Group 7 \u2014 Project Service Principals (Secret Names in Seeding KV)","text":"Variable Default M/O Guidance Description <code>PROJECT_SERVICE_PRINCIPAL_KV_S_NAME_APPID</code> <code>esml-project001-sp-id</code> M ensure must exactly match the secret name in your seeding KV Secret name for the project SP App ID <code>PROJECT_SERVICE_PRINCIPAL_KV_S_NAME_OID</code> <code>esml-project001-sp-oid</code> M ensure must exactly match the secret name in your seeding KV Secret name for the project SP Object ID <code>PROJECT_SERVICE_PRINCIPAL_KV_S_NAME_S</code> <code>esml-project001-sp-secret</code> M ensure must exactly match the secret name in your seeding KV Secret name for the project SP client secret"},{"location":"parameters/advanced/#group-8-core-service-flags","title":"Group 8 \u2014 Core Service Flags","text":"Variable Default M/O Guidance Description <code>ENABLE_AI_FOUNDRY</code> <code>true</code> M recommended keep <code>true</code> for enterprise-grade private networking Deploy AI Foundry Hub and default project with private endpoints <code>ADMIN_AI_SEARCH_TIER</code> <code>basic</code> M ensure <code>free</code> is not allowed when using private endpoints AI Search SKU tier for the common AI Factory <code>ADMIN_SEMANTIC_SEARCH_TIER</code> <code>free</code> M keep-as-is. Options: <code>disabled</code>, <code>free</code>, <code>standard</code> Semantic search tier"},{"location":"parameters/advanced/#group-9-networking-public-private-controls","title":"Group 9 \u2014 Networking \u2014 Public / Private Controls","text":"Variable Default M/O Guidance Description <code>ALLOW_PUBLIC_ACCESS_WHEN_BEHINDVNET</code> <code>true</code> O recommended <code>false</code> for a fully private deployment Allow public access to services even when placed behind a VNet <code>ENABLE_PUBLIC_GENAI_ACCESS</code> <code>true</code> O recommended <code>false</code> for a fully private deployment Enable public access to GenAI endpoints <code>ENABLE_PUBLIC_ACCESS_WITH_PERIMETER</code> <code>true</code> O recommended <code>false</code> for a fully private deployment Enable public access via network perimeter policy <code>CENTRAL_DNS_ZONE_BY_POLICY_IN_HUB</code> <code>false</code> O keep-as-is. otherwise <code>true</code> if a hub manages all private DNS zones centrally Use central hub private DNS instead of per-spoke DNS zones <code>PRIV_DNS_SUBSCRIPTION_PARAM</code> <code>&lt;todo&gt;</code> O ensure mandatory if <code>CENTRAL_DNS_ZONE_BY_POLICY_IN_HUB=true</code> Subscription ID containing the central private DNS zones <code>PRIV_DNS_RESOURCE_GROUP_PARAM</code> <code>&lt;todo&gt;</code> O ensure mandatory if <code>CENTRAL_DNS_ZONE_BY_POLICY_IN_HUB=true</code> Resource group containing the central private DNS zones"},{"location":"parameters/advanced/#group-10-security-defender-cmk-rbac","title":"Group 10 \u2014 Security \u2014 Defender / CMK / RBAC","text":"Variable Default M/O Guidance Description <code>ENABLE_DEFENDER_FOR_AI_SUB_LEVEL</code> <code>false</code> O keep-as-is Enable Microsoft Defender for AI at subscription level <code>ENABLE_DEFENDER_FOR_AI_RESOURCE_LEVEL</code> <code>false</code> O keep-as-is Enable Microsoft Defender for AI at resource level <code>CMK</code> <code>false</code> O keep-as-is Enable Customer-Managed Key encryption for storage and Key Vault <code>CMK_KEY_NAME</code> <code>&lt;todo&gt;aifactory-cmk-key</code> O ensure mandatory if <code>CMK=true</code>. Provide the exact CMK key name in your Key Vault Name of the CMK key in the shared Key Vault <code>CMK_KEY_VERSION</code> <code>\"\"</code> O keep-as-is (auto-uses latest key version) CMK key version; empty = always use latest <code>UPDATE_KEYVAULT_RBAC</code> <code>false</code> O keep-as-is Re-apply RBAC policies on the common Key Vault <code>BYO_CONTRIBUTOR_ROLE_ID</code> <code>b24988ac-6180-42a0-ab88-20f7382dd24c</code> O keep-as-is (built-in Contributor role) Custom contributor role ID if your org uses a scoped role <code>DISABLE_CONTRIBUTOR_ACCESS_FORUSERS</code> <code>false</code> O recommended <code>true</code> for production governance Remove Contributor access from individual users <code>DISABLE_RBAC_ADMIN_ON_RG_FORUSERS</code> <code>false</code> O recommended <code>true</code> for production governance Remove RBAC Administrator role from individual users on RGs <code>ENABLE_DELETE_FOR_DISABLED_RESOURCES</code> <code>true</code> O keep-as-is Delete orphaned or disabled resources on re-runs <code>DELETE_ALL_SERVICES_FOR_PROJECT</code> <code>false</code> O keep-as-is. otherwise <code>true</code> deletes all project resources \u2014 use with caution Tear down all services in a project on re-run <code>DISABLE_WHITELISTING_FOR_BUILD_AGENTS</code> <code>false</code> O keep-as-is Skip adding build agent IPs to service firewall rules"},{"location":"parameters/advanced/#group-11-ai-foundry","title":"Group 11 \u2014 AI Foundry","text":"Variable Default M/O Guidance Description <code>UPDATE_AI_FOUNDRY</code> <code>false</code> O keep-as-is. set <code>true</code> to update an existing AI Foundry Hub Run the AI Foundry update step <code>ADD_AI_FOUNDRY</code> <code>false</code> O keep-as-is Add AI Foundry to an existing project <code>ENABLE_FOUNDRY_CAPHOST</code> <code>false</code> O recommended <code>true</code> \u2014 enables private agents (requires <code>ENABLE_COSMOS_DB=true</code>) Enable AI Foundry Capacity Host for agentic workloads <code>FOUNDRY_DEPLOYMENT_TYPE</code> <code>1</code> O keep-as-is. <code>1</code>=PG, <code>2</code>=AVM, <code>3</code>=Both AI Foundry internal deployment architecture variant <code>ENABLE_AIFACTORY_CREATED_DEFAULT_PROJECT_FOR_AIFV2</code> <code>true</code> O keep-as-is Create the AI Foundry v2 default project automatically <code>DISABLE_AGENT_NETWORK_INJECTION</code> <code>false</code> O keep-as-is. otherwise <code>true</code> only if you need serverless agents \u2014 requires Class B/C subnet ranges Disable network injection for AI Foundry agents"},{"location":"parameters/advanced/#group-12-ml-data-platform","title":"Group 12 \u2014 ML &amp; Data Platform","text":"Variable Default M/O Guidance Description <code>ENABLE_DATAFACTORY</code> <code>false</code> O keep-as-is Deploy Azure Data Factory in the project resource group <code>ENABLE_DATAFACTORY_COMMON</code> <code>false</code> O keep-as-is Deploy Azure Data Factory in the common resource group <code>ENABLE_AZURE_MACHINE_LEARNING</code> <code>false</code> O keep-as-is Deploy Azure Machine Learning workspace <code>ADD_AZURE_MACHINE_LEARNING</code> <code>false</code> O keep-as-is Add AML to an existing project <code>ENABLE_DATABRICKS</code> <code>false</code> O keep-as-is Deploy Azure Databricks workspace <code>DATABRICKS_OID</code> <code>&lt;todo&gt;</code> O ensure mandatory if <code>ENABLE_DATABRICKS=true</code> Object ID of the Databricks service principal"},{"location":"parameters/advanced/#group-13-aks","title":"Group 13 \u2014 AKS","text":"Variable Default M/O Guidance Description <code>ENABLE_AKS_FOR_AZURE_ML</code> <code>true</code> O keep-as-is. ensure mandatory if <code>ENABLE_AZURE_MACHINE_LEARNING=true</code> Deploy private AKS cluster for AML online endpoints <code>AKS_OUTBOUND_TYPE</code> <code>loadBalancer</code> O keep-as-is. otherwise <code>userDefinedRouting</code> if routing through Azure Firewall AKS outbound connectivity type <code>AKS_PRIVATE_DNS_ZONE</code> <code>system</code> O keep-as-is AKS private DNS zone. <code>system</code> = AKS-managed, or supply a custom DNS zone resource ID <code>AKS_AZURE_FIREWALL_PRIVATE_IP</code> <code>\"\"</code> O ensure mandatory if <code>AKS_OUTBOUND_TYPE=userDefinedRouting</code> Private IP of Azure Firewall for UDR routing"},{"location":"parameters/advanced/#group-14-cognitive-services","title":"Group 14 \u2014 Cognitive Services","text":"Variable Default M/O Guidance Description <code>ENABLE_AI_SEARCH</code> <code>true</code> O keep-as-is Deploy Azure AI Search (required for RAG and Agents) <code>ADD_AI_SEARCH</code> <code>false</code> O keep-as-is Add AI Search to an existing project <code>ENABLE_AI_SEARCH_SHARED_PRIVATE_LINK</code> <code>true</code> O keep-as-is Enable shared private link for AI Search indexer <code>ENABLE_AZURE_OPENAI</code> <code>false</code> O keep-as-is Deploy standalone Azure OpenAI (separate from AI Foundry) <code>ENABLE_AZURE_AI_VISION</code> <code>false</code> O keep-as-is Deploy Azure AI Vision <code>ENABLE_AZURE_SPEECH</code> <code>false</code> O keep-as-is Deploy Azure AI Speech <code>ENABLE_AI_DOC_INTELLIGENCE</code> <code>false</code> O keep-as-is Deploy Azure AI Document Intelligence <code>ENABLE_BING</code> <code>false</code> O keep-as-is Enable Bing Grounding for AI Foundry agents <code>ENABLE_BING_CUSTOM_SEARCH</code> <code>false</code> O keep-as-is Enable Bing Custom Search <code>BING_CUSTOM_SEARCH_SKU</code> <code>G2</code> O keep-as-is Bing Custom Search SKU <code>ENABLE_CONTENT_SAFETY</code> <code>false</code> O keep-as-is Deploy Azure AI Content Safety"},{"location":"parameters/advanced/#group-15-databases","title":"Group 15 \u2014 Databases","text":"Variable Default M/O Guidance Description <code>ENABLE_COSMOS_DB</code> <code>false</code> O keep-as-is. ensure required if <code>ENABLE_FOUNDRY_CAPHOST=true</code> Deploy Azure Cosmos DB account <code>COSMOS_KIND</code> <code>GlobalDocumentDB</code> O keep-as-is. otherwise <code>MongoDB</code> Cosmos DB API kind <code>ENABLE_POSTGRESQL</code> <code>false</code> O keep-as-is Deploy Azure Database for PostgreSQL Flexible Server <code>POSTGRES_ADMIN_EMAILS</code> <code>\"\"</code> O ensure mandatory if <code>ENABLE_POSTGRESQL=true</code> Comma-separated admin email(s) for PostgreSQL Entra auth <code>ENABLE_REDIS_CACHE</code> <code>false</code> O keep-as-is Deploy Azure Cache for Redis <code>ENABLE_SQL_DATABASE</code> <code>false</code> O keep-as-is Deploy Azure SQL Database"},{"location":"parameters/advanced/#group-16-functions-web-apps-container-apps","title":"Group 16 \u2014 Functions, Web Apps &amp; Container Apps","text":"Variable Default M/O Guidance Description <code>ENABLE_FUNCTION</code> <code>false</code> O keep-as-is Deploy Azure Function App <code>FUNCTION_RUNTIME</code> <code>dotnet</code> O keep-as-is. otherwise <code>python</code>, <code>node</code>, or <code>java</code> Function App runtime stack <code>FUNCTION_VERSION</code> <code>v7.0</code> O keep-as-is Function App runtime version <code>ENABLE_WEBAPP</code> <code>false</code> O keep-as-is Deploy Azure Web App (App Service) <code>WEBAPP_RUNTIME</code> <code>python</code> O keep-as-is Web App runtime stack <code>WEBAPP_RUNTIME_VERSION</code> <code>3.11</code> O keep-as-is Web App runtime version <code>ASE_SKU</code> <code>IsolatedV2</code> O keep-as-is App Service Environment v3 SKU family <code>ASE_SKU_CODE</code> <code>I1v2</code> O keep-as-is App Service Environment v3 SKU code <code>ASE_SKU_WORKERS</code> <code>1</code> O keep-as-is Number of App Service Environment workers <code>ENABLE_CONTAINER_APPS</code> <code>false</code> O keep-as-is Deploy Azure Container Apps environment <code>ENABLE_APPINSIGHTS_DASHBOARD</code> <code>false</code> O keep-as-is Deploy Application Insights dashboard workbook <code>ACA_W_REGISTRY_IMAGE</code> <code>mcr.microsoft.com/azuredocs/containerapps-helloworld:latest</code> O keep-as-is Seed image for the Container App"},{"location":"parameters/advanced/#group-17-integration","title":"Group 17 \u2014 Integration","text":"Variable Default M/O Guidance Description <code>ENABLE_LOGIC_APPS</code> <code>false</code> O keep-as-is Deploy Azure Logic Apps <code>ENABLE_EVENT_HUBS</code> <code>false</code> O keep-as-is Deploy Azure Event Hubs namespace <code>ENABLE_BOT_SERVICE</code> <code>true</code> O keep-as-is Deploy Azure Bot Service <code>FOUNDRY_API_MANAGEMENT_RESOURCE_ID</code> <code>\"\"</code> O keep-as-is. otherwise provide the full ARM resource ID of an existing APIM instance Link an existing APIM instance as AI Gateway for AI Foundry"},{"location":"parameters/advanced/#group-18-ai-models","title":"Group 18 \u2014 AI Models","text":"Variable Default M/O Guidance Description <code>DEPLOY_MODEL_GPT_4O</code> <code>true</code> O keep-as-is Deploy GPT-4o model in AI Foundry <code>DEFAULT_GPT_4O_VERSION</code> <code>2024-11-20</code> O keep-as-is GPT-4o model version <code>DEFAULT_GPT_CAPACITY</code> <code>40</code> O keep-as-is (= 40 K TPM) Capacity for GPT-4o in thousands of tokens per minute <code>DEPLOY_MODEL_GPT_4O_MINI</code> <code>false</code> O keep-as-is Deploy GPT-4o-mini model <code>DEFAULT_GPT_4O_MINI_VERSION</code> <code>2024-07-18</code> O keep-as-is GPT-4o-mini model version <code>DEPLOY_MODEL_TEXT_EMBEDDING_3_LARGE</code> <code>true</code> O keep-as-is \u2014 recommended for production RAG Deploy text-embedding-3-large <code>DEPLOY_MODEL_TEXT_EMBEDDING_3_SMALL</code> <code>false</code> O keep-as-is Deploy text-embedding-3-small <code>DEPLOY_MODEL_TEXT_EMBEDDING_ADA_002</code> <code>false</code> O keep-as-is (legacy) Deploy text-embedding-ada-002 (older model) <code>DEFAULT_EMBEDDING_CAPACITY</code> <code>25</code> O keep-as-is (= 25 K TPM) Capacity for all embedding models <code>DEPLOY_MODEL_GPT_X</code> <code>false</code> O keep-as-is Deploy a custom or future GPT model <code>MODEL_GPTX_NAME</code> <code>gpt-5-mini</code> O keep-as-is Custom model name (used when <code>DEPLOY_MODEL_GPT_X=true</code>) <code>MODEL_GPTX_VERSION</code> <code>\"\"</code> O keep-as-is (empty = latest available) Custom model version <code>MODEL_GPTX_SKU</code> <code>DataZoneStandard</code> O keep-as-is Custom model SKU <code>MODEL_GPTX_CAPACITY</code> <code>30</code> O keep-as-is (= 30 K TPM) Custom model capacity <code>DEFAULT_MODEL_SKU</code> <code>Standard</code> O keep-as-is Default SKU for all model deployments"},{"location":"parameters/advanced/#group-19-naming-suffixes-acr","title":"Group 19 \u2014 Naming, Suffixes &amp; ACR","text":"Variable Default M/O Guidance Description <code>ADMIN_COMMON_RESOURCE_SUFFIX</code> <code>-001</code> O keep-as-is Suffix appended to common AI Factory resource names <code>ADMIN_PRJ_RESOURCE_SUFFIX</code> <code>-001</code> O keep-as-is Suffix appended to project resource names <code>USE_COMMON_ACR_OVERRIDE</code> <code>true</code> O keep-as-is Override to use the shared common ACR <code>ACR_IP_WHITELIST</code> <code>\"\"</code> O keep-as-is Comma-separated IPs to add to the ACR firewall <code>ACR_ADMIN_USER_ENABLED</code> <code>false</code> O keep-as-is (<code>false</code> = more secure) Enable ACR admin user account <code>ACR_DEDICATED</code> <code>true</code> O keep-as-is. ensure <code>true</code> when using private endpoints or CMK Dedicate the ACR to the AI Factory (no shared SKU) <code>ACR_SKU</code> <code>Premium</code> O keep-as-is. ensure <code>Premium</code> is required for private endpoints and CMK Azure Container Registry SKU"},{"location":"parameters/advanced/#group-20-baseline-networking","title":"Group 20 \u2014 Baseline Networking","text":"Variable Default M/O Guidance Description <code>VNET_RESOURCE_GROUP_BASE</code> <code>esml-common</code> O keep-as-is Base name for the common VNet resource group <code>VNET_NAME_BASE</code> <code>vnt-esmlcmn</code> O keep-as-is Base name for the common VNet <code>SUBNET_COMMON_BASE</code> <code>snet-esml-cmn-001</code> O keep-as-is Base name for the common subnet <code>COMMON_VNET_CIDR</code> <code>172.16.0.0/16</code> O keep-as-is. otherwise choose a <code>/16</code> that doesn't conflict with your hub VNet Common VNet address space <code>COMMON_SUBNET_CIDR</code> <code>172.16.XX.0/26</code> O keep-as-is (<code>XX</code> is replaced at runtime by the env CIDR range) Common subnet CIDR <code>COMMON_SUBNET_SCORING_CIDR</code> <code>172.16.XX.64/26</code> O keep-as-is Scoring/inference subnet CIDR <code>COMMON_PBI_SUBNET_NAME</code> <code>snet-esml-cmn-pbi-001</code> O keep-as-is Power BI Gateway subnet name <code>COMMON_PBI_SUBNET_CIDR</code> <code>172.16.XX.128/26</code> O keep-as-is Power BI Gateway subnet CIDR <code>COMMON_BASTION_SUBNET_NAME</code> <code>AzureBastionSubnet</code> O keep-as-is. ensure must be exactly <code>AzureBastionSubnet</code> for Azure Bastion to work Bastion subnet name (Azure-required fixed name) <code>COMMON_BASTION_SUBNET_CIDR</code> <code>172.16.XX.192/26</code> O keep-as-is Bastion subnet CIDR"},{"location":"parameters/advanced/#group-21-byo-subnets-vnet-overrides","title":"Group 21 \u2014 BYO Subnets &amp; VNet Overrides","text":"<p>Note</p> <p>Only needed when <code>BYO_SUBNETS=true</code>. Leave all defaults if letting the AI Factory auto-calculate subnets.</p> Variable Default M/O Guidance Description <code>BYO_SUBNETS</code> <code>false</code> O keep-as-is. otherwise <code>true</code> to use pre-existing subnets Bring your own subnets instead of AI Factory auto-creating them <code>DEV_NETWORK_ENV</code> <code>dev-</code> O keep-as-is DEV prefix inserted into BYO subnet names <code>STAGE_NETWORK_ENV</code> <code>stage-</code> O keep-as-is STAGE prefix inserted into BYO subnet names <code>PROD_NETWORK_ENV</code> <code>prod-</code> O keep-as-is PROD prefix inserted into BYO subnet names <code>VNET_RESOURCE_GROUP_PARAM</code> <code>\"\"</code> O ensure mandatory if <code>BYO_SUBNETS=true</code> Resource group of the BYO VNet <code>VNET_NAME_FULL_PARAM</code> <code>\"\"</code> O ensure mandatory if <code>BYO_SUBNETS=true</code> Full name of the BYO VNet <code>SUBNET_COMMON</code> <code>\"\"</code> O ensure mandatory if <code>BYO_SUBNETS=true</code> Name of the BYO common subnet <p>You now have a complete view of all parameters</p> <p>Return to Standard Mode to see the minimal mandatory set needed for a first deployment.</p> <p>Source file</p> <p>All parameters above map directly to variables in: <code>environment_setup/aifactory/bicep/copy_to_local_settings/github-actions/.env.template</code></p>"},{"location":"parameters/standard/","title":"Parameters \u2014 Standard Mode","text":"<p>Standard Mode lists only the mandatory parameters \u2014 the minimum set you must configure before running the AI Factory pipeline for the first time.</p> <p>For every parameter including optional ones, see Advanced Mode.</p> <p>Tip</p> <p>Search this page with Ctrl+F. Every variable name matches exactly the key in <code>.env.template</code> (GitHub Actions) or <code>variables.yaml</code> (Azure DevOps).</p>"},{"location":"parameters/standard/#how-to-read-the-tables","title":"How to read the tables","text":"Column Meaning Variable The exact key name to set in <code>.env.template</code> / <code>variables.yaml</code> Default Value already in the file \u2014 what you get without editing Guidance <code>ensure</code> = look up from external source \u00b7 <code>keep-as-is</code> = no change needed \u00b7 <code>recommended</code> = production best practice Description What the variable controls"},{"location":"parameters/standard/#group-1-github-bootstrap-github-actions-only","title":"Group 1 \u2014 GitHub Bootstrap (GitHub Actions only)","text":"Variable Default Guidance Description <code>GITHUB_USERNAME</code> <code>&lt;todo&gt;</code> ensure your GitHub username or organisation name GitHub username or org that owns the new repository <code>GITHUB_NEW_REPO</code> <code>&lt;todo&gt;/&lt;todo&gt;azure-enterprise-scale-aifactory-001</code> ensure format must be <code>&lt;org&gt;/&lt;repo-name&gt;</code> Full path of the new GitHub repository to create <code>TENANT_ID</code> <code>&lt;todo&gt;</code> ensure Azure Portal \u2192 Entra ID \u2192 Overview \u2192 Directory (tenant) ID Azure tenant ID <code>TENANT_AZUREML_OID</code> <code>&lt;todo&gt;</code> ensure Entra ID \u2192 Enterprise Apps \u2192 search <code>Azure Machine Learning</code> (AppId: <code>0736f41a-0425-4b46-bdb5-1563eff02385</code>) \u2192 Object ID. Not needed if <code>ENABLE_AI_FOUNDRY=false</code> Azure Machine Learning service principal Object ID"},{"location":"parameters/standard/#group-2-ai-factory-globals","title":"Group 2 \u2014 AI Factory Globals","text":"Variable Default Guidance Description <code>AIFACTORY_LOCATION</code> <code>eastus2</code> keep-as-is or change to your preferred region Primary Azure region for all AI Factory resources <code>AIFACTORY_LOCATION_SHORT</code> <code>eus2</code> keep-as-is or update to match <code>AIFACTORY_LOCATION</code> (e.g. <code>weu</code>, <code>neu</code>, <code>swe</code>) Short region suffix used in resource names <code>ADMIN_AISEARCH_TIER</code> <code>basic</code> ensure <code>free</code> is not allowed when using private endpoints AI Search SKU. Options: <code>free</code>, <code>basic</code>, <code>standard</code>, <code>standard2</code>, <code>standard3</code>, <code>storage_optimized_l1</code>, <code>storage_optimized_l2</code> <code>AISEARCH_SEMANTIC_TIER</code> <code>free</code> keep-as-is Semantic search tier. Options: <code>disabled</code>, <code>free</code>, <code>standard</code> <code>AIFACTORY_SUFFIX</code> <code>-001</code> keep-as-is for the first scale set. otherwise increment to <code>-002</code>, <code>-003</code> for additional scale sets AI Factory scale set suffix \u2014 appended to resource group names <code>AIFACTORY_SEEDING_KEYVAULT_SUBSCRIPTION_ID</code> <code>&lt;todo&gt;</code> ensure subscription where the DEV seeding Key Vault exists Subscription ID of the DEV seeding Key Vault <code>AIFACTORY_SEEDING_KEYVAULT_NAME</code> <code>&lt;todo&gt;</code> ensure Key Vault must already exist and contain the SP secrets Name of the DEV seeding Key Vault <code>AIFACTORY_SEEDING_KEYVAULT_RG</code> <code>&lt;todo&gt;</code> ensure resource group must already exist Resource group of the DEV seeding Key Vault <code>COMMON_SERVICE_PRINCIPAL_KV_S_NAME_APPID</code> <code>esml-common-sp-id</code> ensure secret name must match exactly what is stored in the seeding Key Vault Secret name in seeding KV holding the common Service Principal App ID <code>COMMON_SERVICE_PRINCIPAL_KV_S_NAME_SECRET</code> <code>esml-common-sp-secret</code> ensure secret name must match exactly what is stored in the seeding Key Vault Secret name in seeding KV holding the common Service Principal secret"},{"location":"parameters/standard/#group-3-azure-subscriptions-cidr-ranges","title":"Group 3 \u2014 Azure Subscriptions &amp; CIDR Ranges","text":"<p>Note</p> <p><code>STAGE_SUBSCRIPTION_ID</code> and <code>PROD_SUBSCRIPTION_ID</code> are optional but strongly recommended \u2014 use separate subscriptions from DEV.</p> Variable Default Guidance Description <code>DEV_SUBSCRIPTION_ID</code> <code>&lt;todo&gt;</code> ensure subscription exists and the common SP has Contributor access DEV Azure subscription ID <code>DEV_CIDR_RANGE</code> <code>61</code> keep-as-is. Replaces <code>XX</code> in CIDR templates (e.g. <code>172.16.61.0/26</code>). otherwise choose any <code>0\u2013255</code> value not conflicting with other environments or existing subnets CIDR substitution value for DEV environment subnets <code>STAGE_CIDR_RANGE</code> <code>62</code> keep-as-is. Must differ from <code>DEV_CIDR_RANGE</code> and <code>PROD_CIDR_RANGE</code> CIDR substitution value for STAGE environment subnets <code>PROD_CIDR_RANGE</code> <code>63</code> keep-as-is. Must differ from <code>DEV_CIDR_RANGE</code> and <code>STAGE_CIDR_RANGE</code> CIDR substitution value for PROD environment subnets"},{"location":"parameters/standard/#group-4-common-service-principal-secret-names-in-seeding-kv","title":"Group 4 \u2014 Common Service Principal (Secret Names in Seeding KV)","text":"Variable Default Guidance Description <code>AZURE_MACHINELEARNING_SP_OID</code> <code>&lt;todo&gt;</code> ensure Entra ID \u2192 Enterprise Apps \u2192 <code>Azure Machine Learning</code> (AppId: <code>0736f41a-0425-4b46-bdb5-1563eff02385</code>) \u2192 Object ID. Not needed if <code>ENABLE_AI_FOUNDRY=false</code> Azure Machine Learning service principal Object ID <code>INPUT_COMMON_SPID_KEY</code> <code>esml-common-sp-id</code> ensure must match the secret name in your seeding Key Vault Secret name holding the common SP App ID <code>INPUT_COMMON_SP_SECRET_KEY</code> <code>esml-common-sp-secret</code> ensure must match the secret name in your seeding Key Vault Secret name holding the common SP secret <code>COMMON_SERVICE_PRINCIPLE_OID_KEY</code> <code>esml-common-sp-oid</code> ensure must match the secret name in your seeding Key Vault Secret name holding the common SP Object ID"},{"location":"parameters/standard/#group-5-project-setup","title":"Group 5 \u2014 Project Setup","text":"Variable Default Guidance Description <code>PROJECT_NUMBER</code> <code>001</code> keep-as-is for the first project. otherwise increment to <code>002</code>, <code>003</code>, etc. for additional projects Project number \u2014 used in resource group names and subnet naming <code>PROJECT_MEMBERS</code> <code>&lt;todo&gt;</code> ensure comma-separated Entra ID Object IDs of users or AD security groups (when <code>USE_AD_GROUPS=true</code>) Entra ID Object IDs of the project team members <code>RUN_JOB1_NETWORKING</code> <code>true</code> keep-as-is when creating or updating a project. otherwise set <code>false</code> to skip networking on service-only re-runs Whether to run subnet/IP calculation and networking deployment"},{"location":"parameters/standard/#group-6-project-service-principals-secret-names-in-seeding-kv","title":"Group 6 \u2014 Project Service Principals (Secret Names in Seeding KV)","text":"<p>These are the names of secrets in the seeding Key Vault that hold the project team's service principal credentials. They must exist before running the pipeline.</p> Variable Default Guidance Description <code>PROJECT_SERVICE_PRINCIPAL_KV_S_NAME_APPID</code> <code>esml-project001-sp-id</code> ensure must match the secret name in your seeding Key Vault Secret name for the project SP App ID <code>PROJECT_SERVICE_PRINCIPAL_KV_S_NAME_OID</code> <code>esml-project001-sp-oid</code> ensure must match the secret name in your seeding Key Vault Secret name for the project SP Object ID <code>PROJECT_SERVICE_PRINCIPAL_KV_S_NAME_S</code> <code>esml-project001-sp-secret</code> ensure must match the secret name in your seeding Key Vault Secret name for the project SP secret"},{"location":"parameters/standard/#group-7-core-service-flags","title":"Group 7 \u2014 Core Service Flags","text":"Variable Default Guidance Description <code>ENABLE_AI_FOUNDRY</code> <code>true</code> recommended keep <code>true</code> for enterprise-grade private networking Deploy AI Foundry Hub and default project with private endpoints <code>ADMIN_AI_SEARCH_TIER</code> <code>basic</code> ensure <code>free</code> is not allowed when using private endpoints AI Search SKU tier for the project <code>ADMIN_SEMANTIC_SEARCH_TIER</code> <code>free</code> keep-as-is Semantic search tier. Options: <code>disabled</code>, <code>free</code>, <code>standard</code> <p>That's all you need for a first deployment</p> <p>Once Groups 1\u20137 are filled in, run the pipeline. The AI Factory calculates networking, deploys all Bicep modules, and configures RBAC automatically \u2014 producing a working AI Foundry + AI Search + private networking baseline in ~10 minutes.</p> <p>Want to enable more services?</p> <p>All optional services (Cosmos DB, AKS, Container Apps, ML Studio, Databricks, models, BYO networking, etc.) are in Advanced Mode.</p>"}]}